apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "redis.fullname" . }}-config
  labels:
    {{- include "redis.labels" . | nindent 4 }}
data:
  redis.conf: |
    # Redis configuration for Kubernetes
    {{- range $key, $value := .Values.config }}
    {{ $key }} {{ $value }}
    {{- end }}
    
    # Kubernetes specific settings
    bind 0.0.0.0
    port 6379
    dir /data
    
    # Logging
    loglevel notice
    logfile ""
    
    # Security
    protected-mode yes